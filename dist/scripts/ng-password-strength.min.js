!function(){"use strict";angular.module("ngPasswordStrength",[]).directive("ngPasswordStrength",function(){return{template:'<div class="progress {{valueClass.outter}}"><div class="{{valueClass.inner}} {{innerClass}}" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="100" ng-style="{width : ( value + \'%\' ) }"><span class="sr-only">{{value}}%</span></div></div>',restrict:"A",scope:{pwd:"=ngPasswordStrength",value:"=strength",innerClassPrefix:"@?",outterClassPrefix:"@?",innerClass:"@?",mode:"=?"},link:function(e){var s={foundation:{innerClass:"meter"},bootstrap:{innerClass:"progress-bar",innerClassPrefix:"progress-bar-"}},n=function(e){var s,n,r,o,t=function(e){for(var s=e.length-1,n="";s>=0;n+=e[s--]);return n},a={pos:{},neg:{}},l={pos:{},neg:{seqLetter:0,seqNumber:0,seqSymbol:0}},u=0,p="abcdefghijklmnopqrstuvwxyz",i="01234567890",m="\\!@#$%&/()=?Â¿";if(e){for(a.pos.lower=e.match(/[a-z]/g),a.pos.upper=e.match(/[A-Z]/g),a.pos.numbers=e.match(/\d/g),a.pos.symbols=e.match(/[~!@#$%^&*()_+-={}|\[\]\\:\";'<>?,.\/]/g),a.pos.middleNumber=e.slice(1,-1).match(/\d/g),a.pos.middleSymbol=e.slice(1,-1).match(/[$-\/:-?{-~!^_`\[\]]/g),l.pos.lower=a.pos.lower?a.pos.lower.length:0,l.pos.upper=a.pos.upper?a.pos.upper.length:0,l.pos.numbers=a.pos.numbers?a.pos.numbers.length:0,l.pos.symbols=a.pos.symbols?a.pos.symbols.length:0,s=_.reduce(l.pos,function(e,s){return e+Math.min(1,s)},0),l.pos.numChars=e.length,s+=l.pos.numChars>=8?1:0,l.pos.requirements=s>=3?s:0,l.pos.middleNumber=a.pos.middleNumber?a.pos.middleNumber.length:0,l.pos.middleSymbol=a.pos.middleSymbol?a.pos.middleSymbol.length:0,a.neg.consecLower=e.match(/(?=([a-z]{2}))/g),a.neg.consecUpper=e.match(/(?=([A-Z]{2}))/g),a.neg.consecNumbers=e.match(/(?=(\d{2}))/g),a.neg.onlyNumbers=e.match(/^[0-9]*$/g),a.neg.onlyLetters=e.match(/^([a-z]|[A-Z])*$/g),a.neg.onlySymbols=a.pos.symbols?a.pos.symbols.length===l.pos.numChars:!1,l.neg.consecLower=a.neg.consecLower?a.neg.consecLower.length:0,l.neg.consecUpper=a.neg.consecUpper?a.neg.consecUpper.length:0,l.neg.consecNumbers=a.neg.consecNumbers?a.neg.consecNumbers.length:0,o=0;o<p.length-2;o++){var g=e.toLowerCase();r=p.substring(o,parseInt(o+3)),n=t(r),-1===g.indexOf(r)&&-1===g.indexOf(n)||l.neg.seqLetter++}for(o=0;o<i.length-2;o++)r=i.substring(o,parseInt(o+3)),n=t(r),-1===e.indexOf(r)&&-1===e.toLowerCase().indexOf(n)||l.neg.seqNumber++;for(o=0;o<m.length-2;o++)r=m.substring(o,parseInt(o+3)),n=t(r),-1===e.indexOf(r)&&-1===e.toLowerCase().indexOf(n)||l.neg.seqSymbol++;l.neg.repeated=_.chain(e.toLowerCase().split("")).countBy(function(e){return e}).reject(function(e){return 1===e}).reduce(function(e,s){return e+s},0).value(),u+=4*l.pos.numChars,l.pos.upper&&(u+=2*(l.pos.numChars-l.pos.upper)),l.pos.lower&&(u+=2*(l.pos.numChars-l.pos.lower)),(l.pos.upper||l.pos.lower)&&(u+=4*l.pos.numbers),u+=6*l.pos.symbols,u+=2*(l.pos.middleSymbol+l.pos.middleNumber),u+=2*l.pos.requirements,u-=2*l.neg.consecLower,u-=2*l.neg.consecUpper,u-=2*l.neg.consecNumbers,u-=3*l.neg.seqNumber,u-=3*l.neg.seqLetter,u-=3*l.neg.seqSymbol,a.neg.onlyNumbers&&(u-=l.pos.numChars),a.neg.onlyLetters&&(u-=l.pos.numChars),a.neg.onlySymbols&&(u-=7*l.pos.numChars),l.neg.repeated&&(u-=l.neg.repeated/l.pos.numChars*10),e.length<8&&(u=Math.min(49,u))}return Math.max(0,Math.min(100,Math.round(u)))},r=function(s){return 30>s?{inner:e.innerClassPrefix+"danger",outter:e.outterClassPrefix+"danger"}:s>=30&&50>s?{outter:e.outterClassPrefix+"warning",inner:e.innerClassPrefix+"warning"}:s>=50?{outter:e.outterClassPrefix+"success",inner:e.innerClassPrefix+"success"}:void 0};e.innerClassPrefix=e.innerClassPrefix||"",e.outterClassPrefix=e.outterClassPrefix||"",e.$watch("mode",function(){angular.extend(e,s[e.mode]),e.valueClass=r(e.value)}),e.$watch("pwd",function(){e.value=n(e.pwd),e.valueClass=r(e.value),e.$parent.$parent.strengthValue=e.value})}}})}();